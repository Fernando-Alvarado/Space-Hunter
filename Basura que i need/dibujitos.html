<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="pruebas.css">

    <link href="https://fonts.googleapis.com/css?family=Patua+One&display=swap" rel="stylesheet">

    <title>Document</title>
</head>
<body>
   <div id="escudos"> <p id="letraID">Escudos <br> Activados</p> </div>
   <canvas height="372" width="27" id="Barraescudos1" class="one"></canvas>
   <canvas height="372" width="27" id="Barraescudos2" class="two"></canvas>


</body>
<script>
    //////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////
    var vidaDelEscudo = 15//seran los segundos que durar el escudo
    function ShieldBar(numero, where){///El numero seran las divisiones en que se dibujaran
  var canvasShiel = document.getElementById(where);
  var Shield = canvasShiel.getContext("2d");
  Shield.beginPath();
  //puntos iniciales // puntos finales
  Shield.rect(1, 1, 25, 370);//la tercera es la que tengo que modificar
  Shield.fillStyle = "#373737";
  Shield.fill();
  Shield.closePath();
///---------
  var vidaTotal = 15 //seran los segundos maximos que durara el escudo
  var alto = ((numero * 370) / vidaTotal);//cambiar eso xd
  Shield.beginPath();
  Shield.rect(1, (371- alto), 25, alto);//la tercera es la que tengo que modificar
  Shield.fillStyle = "#30F10E";//color verde pila 
  Shield.fill();
  Shield.closePath();

}
    //////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////

/////////////-----------------------------------------------------------------------------------------------------

////////////------------------------------------------------------------------------------------------------------
function Resumida(num){
    ShieldBar(num, 'Barraescudos1')
    ShieldBar(num, 'Barraescudos2')
}
////Funcion bucle escudos
function recargaShields(){//ciclo pa que se recarguen los escudos
    setTimeout(()=>{
        if(vidaDelEscudo <= (15)){
            vidaDelEscudo++;
        }
        recargaShields()
        Resumida(vidaDelEscudo)
    },2000)
}///Fata otra vez llamar esta funcion
//--------------------------------

function ActivacionEscudos(){
    document.addEventListener('keydown', (event) => {
        if(event.key == "Enter" && vidaDelEscudo> 1){
            document.getElementById("escudos").style.visibility = "visible";
            function loopShield(){
                setTimeout(()=>{
                if(vidaDelEscudo == 0){
                    document.getElementById("escudos").style.visibility = "hidden";
                    Resumida(vidaDelEscudo)
                }else{
                    vidaDelEscudo--
                    Resumida(vidaDelEscudo)
                    loopShield()
                }
               
              
                },500)
            }
            loopShield()
        }     
    });
}
ActivacionEscudos()
recargaShields()
Resumida(vidaDelEscudo)
</script>
</html>